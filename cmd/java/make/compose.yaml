# docker compose -p java-compiler -f compose.yaml up --build --remove-orphans -d
# docker compose -p java-compiler down
# https://docs.docker.com/compose/compose-file/compose-file-v3/
# rollback_config, restart_policy
version: "3.8"

services:
  java-compiler:
    image: golang:1.17-alpine
    build:
      context: .
      dockerfile: Dockerfile
    hostname: java-compiler
    container_name: java-compiler
    working_dir: /opt/make/workspace
    command: /bin/bash
    tty: true
    user: dev
    volumes:
      - /opt/make/workspace:/opt/make/workspace
      #- ./zyb_settings.xml:/home/dev/m2_settings.xml
    environment:
      TZ: "Asia/Shanghai"
    network_mode: host
    restart: always
    deploy:
      resources:
        limits:
          cpus: "${cpus:-1}"
          memory: ${memory:-2048M}

